<script>

// STATUS
let affinity = 5;
let boldness = 2;
let mental = 6;
let chaos = 0;
let jealousy = 0;

let chapter = 1;
let scene = 0;

// Personagens
const chars = {
 luna: "Luna",
 victor: "Victor",
 leo: "Leo",
 maya: "Maya"
};

// Banco de eventos
const events = {

romance: [
"Ela segura sua m√£o em sil√™ncio.",
"Luna sorri t√≠mida pra voc√™.",
"Ela encosta a cabe√ßa no seu ombro."
],

drama: [
"Victor manda mensagem provocando.",
"Leo fica estranho com voc√™.",
"Luna chora escondida."
],

conflict: [
"Uma discuss√£o explode.",
"Ela se fecha por dias.",
"Voc√™s brigam feio."
],

peace: [
"Voc√™s fazem as pazes.",
"Ela agradece por n√£o desistir.",
"Voc√™s riem juntos."
],

danger: [
"Um segredo vem √† tona.",
"Uma mentira aparece.",
"Algu√©m trai a confian√ßa."
]

};

// Gerador de cap√≠tulos
function generateScene(){

let mood = "";

if(chaos > 8) mood = "danger";
else if(jealousy > 6) mood = "conflict";
else if(affinity > 15) mood = "romance";
else if(mental < 3) mood = "drama";
else mood = "peace";

let text = random(events[mood]);

return {
 text: text,
 choices: [

 {
 text:"Apoiar Luna",
 a:2, m:2, c:-1, j:-1
 },

 {
 text:"Confrontar",
 a:-1, m:-1, c:2, j:2
 },

 {
 text:"Ignorar",
 a:-2, m:-2, c:1, j:0
 },

 {
 text:"Flertar",
 a:1, b:2, c:0, j:1
 }

 ]
};

}

// Utils
function random(arr){
 return arr[Math.floor(Math.random()*arr.length)];
}

// UI
const textBox = document.getElementById("text");
const choicesBox = document.getElementById("choices");
const statusBox = document.getElementById("status");

// HUD
function updateStatus(){

statusBox.innerHTML = `
‚ù§Ô∏è ${affinity}
üî• ${boldness}
üß† ${mental}
‚ö° Caos ${chaos}
üò° Ci√∫mes ${jealousy}
üìñ Cap ${chapter}
`;

}

// Mostrar
function showScene(){

if(chapter > 120){
 endGame();
 return;
}

let sc = generateScene();

textBox.innerText = `Cap√≠tulo ${chapter}\n\n${sc.text}`;

choicesBox.innerHTML = "";

sc.choices.forEach(c=>{

let btn = document.createElement("button");
btn.className="choice";
btn.innerText=c.text;

btn.onclick=()=>{

affinity+=c.a||0;
boldness+=c.b||0;
mental+=c.m||0;
chaos+=c.c||0;
jealousy+=c.j||0;

chapter++;

limit();

updateStatus();
showScene();

};

choicesBox.appendChild(btn);

});

}

// Limites
function limit(){

affinity = Math.max(0,affinity);
mental = Math.max(0,mental);
chaos = Math.max(0,chaos);
jealousy = Math.max(0,jealousy);

}

// Finais
function endGame(){

let ending="";

if(mental<=0){

ending="Luna se perde na pr√≥pria dor. Voc√™ n√£o conseguiu salv√°-la.";

}

else if(affinity<5){

ending="Voc√™s se afastam para sempre.";

}

else if(chaos>15){

ending="O relacionamento vira destrui√ß√£o.";

}

else if(jealousy>12){

ending="Ci√∫mes destr√≥i tudo.";

}

else if(affinity>25 && mental>10){

ending="Voc√™s vencem tudo juntos.";

}

else{

ending="Uma hist√≥ria inacabada.";
}

textBox.innerText = ending;

choicesBox.innerHTML=`
<button class="choice" onclick="location.reload()">
Recome√ßar
</button>
`;

}

// Start
updateStatus();
showScene();

</script>
